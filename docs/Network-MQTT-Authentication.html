<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.MQTT.Authentication</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-MQTT-Authentication.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Network.MQTT.Authentication.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">mqtt-0.1.0.0: An MQTT protocol implementation (client and server).</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Lars Petersen 2016</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>info@lars-petersen.net</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.MQTT.Authentication</p></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> (<a href="../base-4.9.0.0/Text-Show.html#t:Show">Show</a> (<a href="Network-MQTT-Authentication.html#t:Principal">Principal</a> a), <a href="../base-4.9.0.0/Control-Exception-Base.html#t:Exception">Exception</a> (<a href="Network-MQTT-Authentication.html#t:AuthenticationException">AuthenticationException</a> a)) =&gt; <a href="#t:Authenticator">Authenticator</a> a <span class="keyword">where</span><ul class="subs"><li><span class="keyword">data</span> <a href="#t:Principal">Principal</a> a</li><li><span class="keyword">data</span> <a href="#t:AuthenticationException">AuthenticationException</a> a</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:Request">Request</a> r <span class="keyword">where</span><ul class="subs"></ul></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> (<a href="../base-4.9.0.0/Text-Show.html#t:Show">Show</a> (<a href="Network-MQTT-Authentication.html#t:Principal">Principal</a> a), <a href="../base-4.9.0.0/Control-Exception-Base.html#t:Exception">Exception</a> (<a href="Network-MQTT-Authentication.html#t:AuthenticationException">AuthenticationException</a> a)) =&gt; <a id="t:Authenticator" class="def">Authenticator</a> a <span class="keyword">where</span> <a href="src/Network.MQTT.Authentication.html#Authenticator" class="link">Source</a> <a href="#t:Authenticator" class="selflink">#</a></p><div class="doc"><p>An <code><a href="Network-MQTT-Authentication.html#t:Authenticator">Authenticator</a></code> is able to determine a <code><a href="Network-MQTT-Authentication.html#t:Principal">Principal</a></code>'s identity from a
   <code><a href="Network-MQTT-Authentication.html#t:Request">Request</a></code>.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Network-MQTT-Authentication.html#v:authenticate">authenticate</a></p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">data</span> <a id="t:Principal" class="def">Principal</a> a <a href="src/Network.MQTT.Authentication.html#Principal" class="link">Source</a> <a href="#t:Principal" class="selflink">#</a></p><div class="doc"><p>A peer identity optionally associated with connection/session
   specific information.</p></div><p class="src"><span class="keyword">data</span> <a id="t:AuthenticationException" class="def">AuthenticationException</a> a <a href="src/Network.MQTT.Authentication.html#AuthenticationException" class="link">Source</a> <a href="#t:AuthenticationException" class="selflink">#</a></p><div class="doc"><p>This <code><a href="../base-4.9.0.0/Control-Exception-Base.html#t:Exception">Exception</a></code> may be thrown by any operation within this class.
   Operations <em>must</em> only throw this type of exception. Other exceptions
   won't be catched and may kill the broker.</p></div></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:authenticate" class="def">authenticate</a> :: <a href="Network-MQTT-Authentication.html#t:Request">Request</a> r =&gt; a -&gt; r -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Network-MQTT-Authentication.html#t:Principal">Principal</a> a)) <a href="src/Network.MQTT.Authentication.html#authenticate" class="link">Source</a> <a href="#v:authenticate" class="selflink">#</a></p><div class="doc"><p>Try to determine a <code><a href="Network-MQTT-Authentication.html#t:Principal">Principal</a></code>'s identity from connection <code><a href="Network-MQTT-Authentication.html#t:Request">Request</a></code>.</p><p>The operation shall return <code><a href="../base-4.9.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code> in case the authentication
   mechanism is working, but couldn't associate an identity. It shall
   throw and <code><a href="Network-MQTT-Authentication.html#t:AuthenticationException">AuthenticationException</a></code> in case of other problems.</p></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Request" class="def">Request</a> r <span class="keyword">where</span> <a href="src/Network.MQTT.Authentication.html#Request" class="link">Source</a> <a href="#t:Request" class="selflink">#</a></p><div class="doc"><p>This class defines how the information gathered from a
   connection request looks like. An <code><a href="Network-MQTT-Authentication.html#t:Authenticator">Authenticator</a></code> may use
   whatever information it finds suitable to authenticate the <code><a href="Network-MQTT-Authentication.html#t:Principal">Principal</a></code>.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:requestSecure" class="def">requestSecure</a> :: r -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Network.MQTT.Authentication.html#requestSecure" class="link">Source</a> <a href="#v:requestSecure" class="selflink">#</a></p><div class="doc"><p>Is this connection secure in terms of
  <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">Transport Layer Security</a>?</p></div><p class="src"><a id="v:requestUsername" class="def">requestUsername</a> :: r -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="src/Network.MQTT.Authentication.html#requestUsername" class="link">Source</a> <a href="#v:requestUsername" class="selflink">#</a></p><div class="doc"><p>The username supplied with the MQTT handshake.</p></div><p class="src"><a id="v:requestPassword" class="def">requestPassword</a> :: r -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.MQTT.Authentication.html#requestPassword" class="link">Source</a> <a href="#v:requestPassword" class="selflink">#</a></p><div class="doc"><p>The password supplied with the MQTT handshake.</p></div><p class="src"><a id="v:requestHeaders" class="def">requestHeaders</a> :: r -&gt; [(<a href="../case-insensitive-1.2.0.7/Data-CaseInsensitive.html#t:CI">CI</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>)] <a href="src/Network.MQTT.Authentication.html#requestHeaders" class="link">Source</a> <a href="#v:requestHeaders" class="selflink">#</a></p><div class="doc"><p>The HTTP request headers in case the client connected via
   <a href="https://en.wikipedia.org/wiki/WebSocket">WebSocket</a>.</p></div><p class="src"><a id="v:requestCertificateChain" class="def">requestCertificateChain</a> :: r -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../x509-1.6.4/Data-X509.html#t:CertificateChain">CertificateChain</a> <a href="src/Network.MQTT.Authentication.html#requestCertificateChain" class="link">Source</a> <a href="#v:requestCertificateChain" class="selflink">#</a></p><div class="doc"><p>An <a href="https://en.wikipedia.org/wiki/X.509">X.509 certificate</a> chain
   supplied by the peer.
   It can be assumed that the transport layer implementation already
   verified that the peer owns the corresponding private key. The validation
   of the certificate claims (including certificate chain checking) <em>must</em>
   be performed by the <code><a href="Network-MQTT-Authentication.html#t:Authenticator">Authenticator</a></code>.</p></div></div><div class="subs instances"><p id="control.i:Request" class="caption collapser" onclick="toggleSection('i:Request')">Instances</p><div id="section.i:Request" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Request:Request:1" class="instance expander" onclick="toggleSection('i:ic:Request:Request:1')"></span> <a href="Network-MQTT-Authentication.html#t:Request">Request</a> (<a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="../socket-0.6.1.0/System-Socket-Unsafe.html#t:Socket">Socket</a> f t p))</span> <a href="src/Network.MQTT.Authentication.html#line-157" class="link">Source</a> <a href="#t:Request" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Request:Request:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:requestSecure">requestSecure</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="../socket-0.6.1.0/System-Socket-Unsafe.html#t:Socket">Socket</a> f t p) -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Network.MQTT.Authentication.html#requestSecure" class="link">Source</a> <a href="#v:requestSecure" class="selflink">#</a></p><p class="src"><a href="#v:requestUsername">requestUsername</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="../socket-0.6.1.0/System-Socket-Unsafe.html#t:Socket">Socket</a> f t p) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="src/Network.MQTT.Authentication.html#requestUsername" class="link">Source</a> <a href="#v:requestUsername" class="selflink">#</a></p><p class="src"><a href="#v:requestPassword">requestPassword</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="../socket-0.6.1.0/System-Socket-Unsafe.html#t:Socket">Socket</a> f t p) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.MQTT.Authentication.html#requestPassword" class="link">Source</a> <a href="#v:requestPassword" class="selflink">#</a></p><p class="src"><a href="#v:requestHeaders">requestHeaders</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="../socket-0.6.1.0/System-Socket-Unsafe.html#t:Socket">Socket</a> f t p) -&gt; [(<a href="../case-insensitive-1.2.0.7/Data-CaseInsensitive.html#t:CI">CI</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>)] <a href="src/Network.MQTT.Authentication.html#requestHeaders" class="link">Source</a> <a href="#v:requestHeaders" class="selflink">#</a></p><p class="src"><a href="#v:requestCertificateChain">requestCertificateChain</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="../socket-0.6.1.0/System-Socket-Unsafe.html#t:Socket">Socket</a> f t p) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../x509-1.6.4/Data-X509.html#t:CertificateChain">CertificateChain</a> <a href="src/Network.MQTT.Authentication.html#requestCertificateChain" class="link">Source</a> <a href="#v:requestCertificateChain" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Request:Request:2" class="instance expander" onclick="toggleSection('i:ic:Request:Request:2')"></span> <a href="Network-MQTT-Authentication.html#t:Request">Request</a> (<a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> a) =&gt; <a href="Network-MQTT-Authentication.html#t:Request">Request</a> (<a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:WebSocket">WebSocket</a> a))</span> <a href="src/Network.MQTT.Authentication.html#line-164" class="link">Source</a> <a href="#t:Request" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Request:Request:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:requestSecure">requestSecure</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:WebSocket">WebSocket</a> a) -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Network.MQTT.Authentication.html#requestSecure" class="link">Source</a> <a href="#v:requestSecure" class="selflink">#</a></p><p class="src"><a href="#v:requestUsername">requestUsername</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:WebSocket">WebSocket</a> a) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="src/Network.MQTT.Authentication.html#requestUsername" class="link">Source</a> <a href="#v:requestUsername" class="selflink">#</a></p><p class="src"><a href="#v:requestPassword">requestPassword</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:WebSocket">WebSocket</a> a) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.MQTT.Authentication.html#requestPassword" class="link">Source</a> <a href="#v:requestPassword" class="selflink">#</a></p><p class="src"><a href="#v:requestHeaders">requestHeaders</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:WebSocket">WebSocket</a> a) -&gt; [(<a href="../case-insensitive-1.2.0.7/Data-CaseInsensitive.html#t:CI">CI</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>)] <a href="src/Network.MQTT.Authentication.html#requestHeaders" class="link">Source</a> <a href="#v:requestHeaders" class="selflink">#</a></p><p class="src"><a href="#v:requestCertificateChain">requestCertificateChain</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:WebSocket">WebSocket</a> a) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../x509-1.6.4/Data-X509.html#t:CertificateChain">CertificateChain</a> <a href="src/Network.MQTT.Authentication.html#requestCertificateChain" class="link">Source</a> <a href="#v:requestCertificateChain" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Request:Request:3" class="instance expander" onclick="toggleSection('i:ic:Request:Request:3')"></span> <a href="Network-MQTT-Authentication.html#t:Request">Request</a> (<a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> a) =&gt; <a href="Network-MQTT-Authentication.html#t:Request">Request</a> (<a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:TLS">TLS</a> a))</span> <a href="src/Network.MQTT.Authentication.html#line-159" class="link">Source</a> <a href="#t:Request" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Request:Request:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:requestSecure">requestSecure</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:TLS">TLS</a> a) -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Network.MQTT.Authentication.html#requestSecure" class="link">Source</a> <a href="#v:requestSecure" class="selflink">#</a></p><p class="src"><a href="#v:requestUsername">requestUsername</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:TLS">TLS</a> a) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="src/Network.MQTT.Authentication.html#requestUsername" class="link">Source</a> <a href="#v:requestUsername" class="selflink">#</a></p><p class="src"><a href="#v:requestPassword">requestPassword</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:TLS">TLS</a> a) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.MQTT.Authentication.html#requestPassword" class="link">Source</a> <a href="#v:requestPassword" class="selflink">#</a></p><p class="src"><a href="#v:requestHeaders">requestHeaders</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:TLS">TLS</a> a) -&gt; [(<a href="../case-insensitive-1.2.0.7/Data-CaseInsensitive.html#t:CI">CI</a> <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a>)] <a href="src/Network.MQTT.Authentication.html#requestHeaders" class="link">Source</a> <a href="#v:requestHeaders" class="selflink">#</a></p><p class="src"><a href="#v:requestCertificateChain">requestCertificateChain</a> :: <a href="Network-MQTT-ServerStack.html#t:ServerConnection">ServerConnection</a> (<a href="Network-MQTT-ServerStack.html#t:TLS">TLS</a> a) -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../x509-1.6.4/Data-X509.html#t:CertificateChain">CertificateChain</a> <a href="src/Network.MQTT.Authentication.html#requestCertificateChain" class="link">Source</a> <a href="#v:requestCertificateChain" class="selflink">#</a></p></div></div></td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>